<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Nano Banana - Visual Sport Designer</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <style>
        :root { --banana: #FFE135; --dark: #121212; }
        body { background: var(--dark); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        .sidebar { width: 320px; background: #1a1a1a; padding: 25px; border-right: 2px solid var(--banana); display: flex; flex-direction: column; gap: 20px; box-shadow: 5px 0 15px rgba(0,0,0,0.5); z-index: 10; }
        .canvas-area { flex-grow: 1; display: flex; justify-content: center; align-items: center; background: #080808; position: relative; overflow: auto; }
        .control-box { background: #252525; padding: 15px; border-radius: 8px; border: 1px solid #333; }
        h2 { color: var(--banana); font-size: 1rem; margin-top: 0; text-transform: uppercase; letter-spacing: 1px; }
        input[type="color"] { width: 100%; height: 40px; border: none; cursor: pointer; background: none; }
        button { background: var(--banana); color: black; border: none; padding: 12px; border-radius: 5px; font-weight: bold; cursor: pointer; width: 100%; transition: 0.3s; }
        button:hover { background: #ffd700; transform: translateY(-2px); }
        .canvas-container { box-shadow: 0 0 50px rgba(0,0,0,0.8); border: 1px solid #333; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h1 style="color: var(--banana); margin: 0; font-size: 1.5rem;">NANO BANANA</h1>
        <p style="font-size: 0.8rem; color: #888;">Visual Sport - Área Técnica 35x80cm</p>

        <div class="control-box">
            <h2>1. Color de Base</h2>
            <input type="color" id="colorPicker" value="#0044cc" onchange="changeColor(this.value)">
        </div>

        <div class="control-box">
            <h2>2. Tus Logos</h2>
            <input type="file" id="fileInput" accept="image/*" style="font-size: 0.8rem; color: #ccc;">
        </div>

        <div class="control-box">
            <h2>3. IA Designer</h2>
            <textarea id="aiPrompt" placeholder="Instrucciones para la IA..." style="width: 100%; background: #000; color: #fff; border: 1px solid #444; border-radius: 4px; padding: 8px; box-sizing: border-box;"></textarea>
            <button style="margin-top: 10px; background: #444; color: white; font-size: 0.7rem;">GENERAR PATRÓN (Próximamente)</button>
        </div>

        <button onclick="downloadDesign()" style="margin-top: auto; background: #28a745; color: white;">FINALIZAR Y ENVIAR ARTE</button>
    </div>

    <div class="canvas-area">
        <canvas id="mainCanvas"></canvas>
    </div>

    <script>
        // Configuración del lienzo: Proporción 35x80cm (Escalado 1:10 para pantalla)
        const canvas = new fabric.Canvas('mainCanvas', {
            width: 350,
            height: 800,
            backgroundColor: '#0044cc'
        });

        // Cambiar color de fondo
        function changeColor(color) {
            canvas.setBackgroundColor(color, canvas.renderAll.bind(canvas));
        }

        // Subir Logos
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            const reader = new FileReader();
            reader.onload = function(f) {
                fabric.Image.fromURL(f.target.result, function(img) {
                    img.scaleToWidth(150);
                    canvas.add(img);
                    canvas.centerObject(img);
                });
            };
            reader.readAsDataURL(file);
        });

        // Descargar plano para Visual Sport
        function downloadDesign() {
            // Genera la imagen a alta resolución (multiplier 4 para impresión)
            const dataURL = canvas.toDataURL({
                format: 'png',
                multiplier: 4
            });
            const link = document.createElement('a');
            link.download = 'arte-plano-35x80-visualsport.png';
            link.href = dataURL;
            link.click();
        }
    </script>
</body>
</html>
