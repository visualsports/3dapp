<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Visualynx ‚Äî AI Kit Builder by Visual Sports</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #FFE135; --panel: rgba(15, 15, 15, 0.9); }
        body { background: #000; color: white; font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Panel Lateral Izquierdo */
        .sidebar { 
            width: 380px; background: var(--panel); padding: 30px; 
            border-right: 1px solid #222; display: flex; flex-direction: column; gap: 20px; 
            z-index: 100; backdrop-filter: blur(20px); box-sizing: border-box;
        }
        
        /* √Årea Principal */
        .preview-area { 
            flex-grow: 1; display: flex; flex-direction: column; justify-content: center; align-items: center; 
            background: url('/assets/fondo.gif') no-repeat center center;
            background-size: cover; position: relative;
        }

        /* Selector de Vista (Frente/Espalda) */
        .view-switcher { position: absolute; top: 30px; display: flex; gap: 10px; z-index: 10; }
        .view-btn { background: rgba(255,255,255,0.1); border: 1px solid #444; color: white; padding: 10px 25px; border-radius: 30px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .view-btn.active { background: var(--accent); color: black; border-color: var(--accent); }

        /* Mockup Contenedor */
        .mockup-container { position: relative; width: 90%; height: 80%; max-width: 650px; }
        .layer { position: absolute; width: 100%; height: 100%; pointer-events: none; object-fit: contain; }

        /* M√°scara de dise√±o */
        #dynamic-mask {
            mask-size: contain; -webkit-mask-size: contain; 
            mask-repeat: no-repeat; -webkit-mask-repeat: no-repeat;
            mask-position: center; -webkit-mask-position: center;
            background: #111; z-index: 1; width: 100%; height: 100%;
        }

        /* UI Elements */
        .control-box { background: rgba(255,255,255,0.03); padding: 20px; border-radius: 16px; border: 1px solid rgba(255,255,255,0.1); }
        h1 { font-size: 1.8rem; color: var(--accent); margin: 0; font-weight: 900; letter-spacing: -2px; }
        
        textarea {
            width: 100%; background: #000; color: #fff; border: 1px solid #333; 
            border-radius: 12px; padding: 15px; box-sizing: border-box; resize: none;
            font-family: inherit; font-size: 0.9rem; margin-top: 10px; outline: none;
        }
        
        .btn-ai { background: var(--accent); color: black; border: none; padding: 16px; border-radius: 12px; font-weight: 900; cursor: pointer; width: 100%; margin-top: 10px; }
        .btn-finalize { background: #fff; color: #000; margin-top: auto; padding: 20px; border-radius: 12px; font-weight: 900; border: none; cursor: pointer; }

        #production-canvas { position: absolute; left: -9999px; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div>
            <h1>Visualynx</h1>
            <p style="font-size: 0.7rem; color: #555;">GEN-AI APPAREL LAB BY VISUAL SPORTS</p>
        </div>

        <div class="control-box">
            <h2 style="font-size: 0.7rem; color: #888; text-transform: uppercase;">AI Design Prompt</h2>
            <textarea id="aiPrompt" rows="4" placeholder="Ej: Estilo m√°rmol l√≠quido en tonos negro y dorado..."></textarea>
            <button class="btn-ai" onclick="generateAI()">‚ú® GENERAR CON IA</button>
        </div>

        <div class="control-box">
            <h2 style="font-size: 0.7rem; color: #888; text-transform: uppercase;">Color Base</h2>
            <input type="color" id="kitColor" value="#111111" onchange="updateColor(this.value)" style="width:100%; height:40px; cursor:pointer;">
        </div>

        <button class="btn-finalize" onclick="sendToProduction()">SOLICITAR ESTE DISE√ëO</button>
    </div>

    <div class="preview-area">
        <div class="view-switcher">
            <button id="btn-frente" class="view-btn active" onclick="switchView('frente')">FRENTE</button>
            <button id="btn-espalda" class="view-btn" onclick="switchView('espalda')">ESPALDA</button>
        </div>

        <div class="mockup-container">
            <!-- Capa Din√°mica (se le aplica la m√°scara por JS) -->
            <div id="dynamic-mask" class="layer"></div>
            
            <!-- Sombras y Brillos (ID para cambiarlos por vista) -->
            <img id="img-sombras" src="/assets/frente_sombras.png" class="layer" style="mix-blend-mode: multiply; z-index: 2;">
            <img id="img-highlights" src="/assets/frente_highlights.png" class="layer" style="mix-blend-mode: screen; opacity: 0.8; z-index: 3;">
        </div>
    </div>

    <canvas id="production-canvas"></canvas>

    <script>
        // Configuraci√≥n inicial
        const config = {
            frente: { base: '/assets/frente_base.png', sombras: '/assets/frente_sombras.png', highlights: '/assets/frente_highlights.png' },
            espalda: { base: '/assets/espalda_base.png', sombras: '/assets/espalda_sombras.png', highlights: '/assets/espalda_highlights.png' }
        };

        let currentView = 'frente';
        const canvas = new fabric.Canvas('production-canvas', { width: 650, height: 800, backgroundColor: '#111' });

        function switchView(view) {
            currentView = view;
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + view).classList.add('active');
            
            // Actualizar im√°genes del mockup
            const mask = document.getElementById('dynamic-mask');
            mask.style.maskImage = `url('${config[view].base}')`;
            mask.style.webkitMaskImage = `url('${config[view].base}')`;
            
            document.getElementById('img-sombras').src = config[view].sombras;
            document.getElementById('img-highlights').src = config[view].highlights;
        }

        // Aplicar m√°scara inicial al cargar
        switchView('frente');

        function updateColor(color) {
            document.getElementById('dynamic-mask').style.backgroundColor = color;
            canvas.setBackgroundColor(color, canvas.renderAll.bind(canvas));
        }

        function generateAI() {
            const prompt = document.getElementById('aiPrompt').value;
            if(!prompt) return alert("Escribe una idea para la IA");
            alert("‚ú® Visualynx AI est√° creando un patr√≥n basado en: " + prompt);
        }

        function sendToProduction() {
            alert("üöÄ ¬°Solicitud enviada!\nVisual Sports recibir√° tu configuraci√≥n de 65x80cm.");
        }
    </script>
</body>
</html>
